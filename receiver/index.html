<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta http-equiv="cache-control" content="max-age=0" />
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="expires" content="0" />
    <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
    <meta http-equiv="pragma" content="no-cache" />

    <link rel="stylesheet" href="font-awesome-4.2.0/css/font-awesome.css"/>
    <link rel="stylesheet" href="dashboard.css"/>

    <script type="text/javascript" src="http://openflint.github.io/flint-receiver-sdk/v1/receiver.js"></script>
    <script type="text/javascript" src="http://openflint.github.io/flint-receiver-sdk/v1/receiver_wrapper.js"></script>
    <title> DashBoard </title>
</head>

<body>
    <div id="textContainer">
        <div id="textMessage">App is loading...</div>
    </div>
    <script language="JavaScript" type="text/javascript">
        window.onload = function(evt) {
            var textContainerElement = document.getElementById('textContainer');
            var textMessageElement = document.getElementById('textMessage');

            window.dashBoardManager = new ReceiverManagerWrapper('~dashboard');
            var messageBus = window.dashBoardManager.createMessageBus("urn:flint:tv.matchstick.demo.dashboard");
            messageBus.on("message", function (senderId, data) {
                console.log('message:' + senderId + data);
                var message = JSON.parse(data);
                if (message.command == 'show') {
                    textContainerElement.style.display = 'table';
                    textMessageElement.innerText = message.user + '(' + senderId + ')' + ' says: ' + message.info;
                }
            });
            window.dashBoardManager.open();
        };
    </script>
</div>
</body>
</html>
